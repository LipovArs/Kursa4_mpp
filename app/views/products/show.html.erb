<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>DedDoma</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="home.scss">
  <link rel="icon" href="favicon.png" sizes="any"/>
</head>
<body>
    

    <div id="header"></div>
   
    


        <div class="container ">
            <div class="row">
              <div class="col advantages d-flex justify-content-left">
                
              </div>
              <div class="col col-lg-8">
                <h2 class=" d-flex justify-content-center">
                    <span><br>  <%= @product.pr_name %> </span>
                </h2>
              </div>
              <div class="col">
                <h2 class="col advantages d-flex justify-content-end"><br>
                    
                </h2>
              </div>
            </div>
          </div><br>

          <div class="container">
            <div class="row">
              <div class="col-sm-7"><div >
                <div class="product-card">
          <div class="product-card-offer"></div>
          <div class="bg-warning rounded d-inline-block p-2">
            <p class="mb-0 text-dark">Код товару: <%= @product.SKUN %></p>
          </div>
                    <div class="product-thumb ">
			
                        <%= image_tag(@product.images[0]) %>
                    </div>
                    <div class="text-center">
                        <h3>
                            <%= @product.pr_name %>
				
                        </h3>
                        <p class="product-excerpt">
                        
                            
                        </p>
                        <div class="product-bottom-details d-flex justify-content-between">
                            <div >
                             <%= @product.price_for_client %>
                                ₴
                            </div>
                            <div class="product-links">
															<% if user_signed_in? %>
																<%= form_with(url: carts_add_path) do |f| %>
																	<%= f.hidden_field :id, value: @product.id %>
																	<% if @cart.orderables.find_by(product_id: @product.id) %>
																		<%= f.hidden_field :quantity, value: @cart.orderables.find_by(product_id: @product.id).quantity + 1 %>
																	<% else %>
																		<%= f.hidden_field :quantity, value:  1 %>
																	<% end %>
																	<%= f.submit "В кошик!", :class=>"btn  btn-outline-secondary add-to-cart"%>
																<% end %>
															<% end %>
                            </div>
                        </div>
                    </div>
                </div>
            </div></div>
            
              <div class="col-sm-5"><div >
              
                <div class="content detail-text-wrap">
                   
			<p>
  			<strong>Об'єм:</strong> 
  			<%= @product.pr_volume%>
			</p>

			<p>
			<%if @product.pr_alcohol_id%>
  			<strong>Міцність:</strong>
  			<%= @product.pr_alcohol%>
  			<%end%>
			</p>

			<p>
			<%if @product.pr_endurance_id%>
  			<strong>Витримка:</strong>
  			<%= @product.pr_endurance%>
  			<%end%>
			</p>

			<p>
			<%if @product.pr_category_id%>
  			<strong>Категорія:</strong>
  			<%= @product.pr_category%>
  			<%end%>
			</p>

			<p>
			<%if @product.pr_sub_category_id%>
  			<strong>Тип:</strong>
  			<%= @product.pr_sub_category%>
  			<%end%>
			</p>

			<p>
			<%if @product.pr_brand_id%>
  			<strong>Бренд:</strong>
  			<%= @product.pr_brand%>
			<%end%>
			</p>

			<p>
			<%if @product.pr_country_id%>
  			<strong>Країна походження:</strong>
  			<%= @product.pr_country%>
  			<%end%>
			</p>

			<p>
			<%if @product.pr_color_id%>
			<strong>Колір:</strong>
			<%= @product.pr_color%>
			<%end%>
			</p>

			<p>
			<%if @product.pr_color_id%>
			<strong>Солодкість:</strong>
			<%= @product.pr_sweetness%>
			<%end%>
			</p>
			</div>
                 </div>
                </div>
                
                
                 <div class="col-12 text-center">
                <br>
                <br>
               
                        <h4 class="section-title"> 
                            <span>Про <%= @product.pr_name %> </span>
                        </h4>
                    </div> 
			<br><%= @product.description %><br>
			
            </div>
           <br>
                <br>
          </div>

		
<style>
  .comment-section {
    border: 2px solid #FFD700; /* Add a bright yellow border */
    background-color: #FFFFE0; /* Add a pale yellow background */
    padding: 20px; /* Add padding for spacing */
    margin-left: 250px; /* Indent from the left by 250 pixels */
    margin-right: 250px; /* Indent from the right by 250 pixels */
    border-radius: 5px; /* Add a slight border radius for rounded corners */
  }
  
  .comment-section form {
    margin-bottom: 20px; /* Add spacing below the comment form */
    display: flex; /* Use flexbox to align items */
    flex-wrap: wrap; /* Allow wrapping of elements */
    align-items: center; /* Vertically center items */
  }
  
  .comment-section form .comment-input {
    flex: 1 0 100%; /* Take full width on smaller screens */
    margin-bottom: 10px; /* Add spacing below the comment input */
  }
  
  .comment-section form .rating-input {
    flex: 1 0 100%; /* Take full width on smaller screens */
    margin-bottom: 10px; /* Add spacing below the rating input */
  }
  
  .comment-section form .rating-input .star-rating {
    display: inline-block;
    font-size: 20px;
    color: #FFD700;
    transition: color 0.3s ease-in-out;
    cursor: pointer;
  }
  
  .comment-section form .rating-input .star-rating:hover {
    background: linear-gradient(to right, red, green);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }
  
  .comment-section form .add-comment-button {
    flex: 1 0 100%; /* Take full width on smaller screens */
  }
  
  .comment {
    margin-bottom: 20px; /* Add spacing between individual comments */
  }
  
  .nickname {
    color: orange; /* Set the username color to orange */
    font-size: 18px; /* Increase the username font size */
  }
</style>

<% if user_signed_in? %>
<div class="comment-section">
  <%= form_with(url: products_create_comment_path) do |f| %>
    <div class="form-group comment-input">
      <%= f.hidden_field :product_id, value: @product.id %>
      <%= f.hidden_field :user_id, value: current_user.id %>
      <%= f.text_area :comment, class: "form-control", rows: 3, placeholder: "Comment" %>
    </div>
    <div class="form-group rating-input">
      <div class="star-rating">
        <% 5.times do |i| %>
          <%= f.radio_button :rating, i+1, id: "rating_#{i+1}" %>
          <label for="rating_<%= i+1 %>" class="star">&#9733;</label>
        <% end %>
      </div>
    </div>
    <div class="form-group add-comment-button">
      <%= f.submit "Додати коментар", :class=>"btn btn-outline-secondary add-to-cart" %>
    </div>
  <% end %>
<% end %>
  <div class="comments">
    <% comments = Comment.where(product_id: @product.id) %>
    <% if comments %>
      <% comments.each do |comment| %>
        <div class="comment">
          <div class="comment-header">
            <span class="nickname"><%= comment.user %></span>
            <span class="rating"><%= comment.rating %></span>
          </div>
          <div class="comment-content">
            <%= comment.comment %>
          </div>
        </div>
      <% end %>
    <% end %>
  </div>
</div>
<br>


</body>
</html>
